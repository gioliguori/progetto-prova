{"version":3,"names":["_lodash","require","_tap","_interopRequireDefault","whileInFlight","param","whileInFlightDecorator","target","name","descriptor","value","wrap","whileInFlightExecutor","fn","_this","_len","arguments","length","args","Array","_key","_promise","default","resolve","_apply","then","tap","catch","reason","reject"],"sources":["while-in-flight.js"],"sourcesContent":["/*!\n * Copyright (c) 2015-2020 Cisco Systems, Inc. See LICENSE file.\n */\n\n/* eslint no-invalid-this: [0] */\n\nimport {wrap} from 'lodash';\n\nimport tap from './tap';\n\n/**\n * While the promise returned by the decorated is unfullfilled, sets, the\n * specified boolean on the target class to `true`\n * @param {string} param\n * @returns {Function}\n */\nexport default function whileInFlight(param) {\n  return function whileInFlightDecorator(target, name, descriptor) {\n    descriptor.value = wrap(descriptor.value, function whileInFlightExecutor(fn, ...args) {\n      return new Promise((resolve) => {\n        this[param] = true;\n        resolve(\n          Reflect.apply(fn, this, args)\n            .then(\n              tap(() => {\n                this[param] = false;\n              })\n            )\n            .catch((reason) => {\n              this[param] = false;\n\n              return Promise.reject(reason);\n            })\n        );\n      });\n    });\n  };\n}\n"],"mappings":";;;;;;;;;;AAMA,IAAAA,OAAA,GAAAC,OAAA;AAEA,IAAAC,IAAA,GAAAC,sBAAA,CAAAF,OAAA;AARA;AACA;AACA;;AAEA;;AAMA;AACA;AACA;AACA;AACA;AACA;AACe,SAASG,aAAaA,CAACC,KAAK,EAAE;EAC3C,OAAO,SAASC,sBAAsBA,CAACC,MAAM,EAAEC,IAAI,EAAEC,UAAU,EAAE;IAC/DA,UAAU,CAACC,KAAK,GAAG,IAAAC,YAAI,EAACF,UAAU,CAACC,KAAK,EAAE,SAASE,qBAAqBA,CAACC,EAAE,EAAW;MAAA,IAAAC,KAAA;MAAA,SAAAC,IAAA,GAAAC,SAAA,CAAAC,MAAA,EAANC,IAAI,OAAAC,KAAA,CAAAJ,IAAA,OAAAA,IAAA,WAAAK,IAAA,MAAAA,IAAA,GAAAL,IAAA,EAAAK,IAAA;QAAJF,IAAI,CAAAE,IAAA,QAAAJ,SAAA,CAAAI,IAAA;MAAA;MAClF,OAAO,IAAAC,QAAA,CAAAC,OAAA,CAAY,UAACC,OAAO,EAAK;QAC9BT,KAAI,CAACT,KAAK,CAAC,GAAG,IAAI;QAClBkB,OAAO,CACL,IAAAC,MAAA,CAAAF,OAAA,EAAcT,EAAE,EAAEC,KAAI,EAAEI,IAAI,CAAC,CAC1BO,IAAI,CACH,IAAAC,YAAG,EAAC,YAAM;UACRZ,KAAI,CAACT,KAAK,CAAC,GAAG,KAAK;QACrB,CAAC,CACH,CAAC,CACAsB,KAAK,CAAC,UAACC,MAAM,EAAK;UACjBd,KAAI,CAACT,KAAK,CAAC,GAAG,KAAK;UAEnB,OAAOgB,QAAA,CAAAC,OAAA,CAAQO,MAAM,CAACD,MAAM,CAAC;QAC/B,CAAC,CACL,CAAC;MACH,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ,CAAC;AACH"}